<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.prime.com.tr/ui"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://java.sun.com/jstl/core"
	template="/templates/base.xhtml">

	<ui:define name="title">Configuration de la Drivebox</ui:define>
	<ui:define name="menu"></ui:define>
	<ui:define name="title_page">Configuration de la Drivebox</ui:define>
	<ui:define name="content">
		<script type="text/javascript">
			function handleDrop(event, ui) {
				ui.draggable.fadeOut(function() {
					jQuery(this).fadeIn();
				});
				jQuery(this).droppable('disable');
				alert(jQuery(this));

			}
			function handleDrop2(event, ui) {
				var obj = jQuery(this);
				//alert(obj.position);
				var curleft = 0;
				var curtop = 0;
				if (obj.offsetParent) {
					//alert(obj.offsetLeft);
					curleft += obj.offsetLeft;
					curtop += obj.offsetTop;

				}
				//alert(curleft + "" + curtop);
			}
		</script>
		<h:form id="paramForm">
			<table>
				<tr>
					<th>Nom</th>
					<td><h:inputText binding="#{configDriveboxController.nameInput}"></h:inputText></td>
				</tr>
				<tr>
					<th>Num√©ro de transfert</th>
					<td><h:inputText binding="#{configDriveboxController.numInput}"></h:inputText></td>
				</tr>
				<tr>
					<th>Muet</th>
					<td><h:selectBooleanCheckbox binding="#{configDriveboxController.muteInput}"></h:selectBooleanCheckbox> </td>
				</tr>
				<tr>
					<td><h:commandButton value="Sauver" title="Sauver" action="#{configDriveboxController.saveParams}"></h:commandButton></td>
				</tr>
			</table>
		</h:form>
		<br/>
		<br/>
		<h:form prependId="false" id="dashboardForm">
			<p:messages id="msgs" showDetail="true" />
			<h:panelGrid columns="5" cellspacing="0" cellpadding="0"
				id="installedAppsGrid">
				<!-- <ui:repeat value="#{configDriveboxController.tab}" var="row" >
						<ui:repeat value="#{row}" var="cell"> -->
				<p:outputPanel
					style="background: #333333; width: 80px; height: 80px; display: block; border: 1px solid #222222;">
					<p:droppable dropListener="#{configDriveboxController.onDrop}"
						tolerance="fit" activeStyleClass="slotActive" scope="test"
						onDrop="handleDrop2" id="appDrop_0_0"
						onDropUpdate="installedAppsGrid msgs" datasource="availableApps" />
					<p:graphicImage
						value="/resources/images/apps/#{configDriveboxController.installedAppIcon(0,0)}"
						rendered="#{configDriveboxController.iconHasToBeDisplayed(0,0)}"
						styleClass="appImage" title="#{configDriveboxController.installedAppName(0,0)}"
						style="opacity: 0.2; filter:alpha(opacity=20);" />
				</p:outputPanel>

				<!-- 	</ui:repeat>
					</ui:repeat>-->

				<p:outputPanel
					style="background: #333333; width: 80px; height: 80px; display: block; border: 1px solid #222222;">
					<p:droppable dropListener="#{configDriveboxController.onDrop}"
						tolerance="fit" activeStyleClass="slotActive" scope="test"
						onDrop="handleDrop2" id="appDrop_0_1"
						onDropUpdate="installedAppsGrid msgs" datasource="availableApps" />
					<p:graphicImage
						value="/resources/images/apps/#{configDriveboxController.installedAppIcon(0,1)}"
						rendered="#{configDriveboxController.iconHasToBeDisplayed(0,1)}"
						styleClass="appImage" title="#{configDriveboxController.installedAppName(0,1)}"
						style="opacity: 0.2; filter:alpha(opacity=20);" />
				</p:outputPanel>
				<p:outputPanel
					style="background: #333333; width: 80px; height: 80px; display: block; border: 1px solid #222222;">
					<p:droppable dropListener="#{configDriveboxController.onDrop}"
						tolerance="fit" activeStyleClass="slotActive" scope="test"
						onDrop="handleDrop2" id="appDrop_0_2"
						onDropUpdate="installedAppsGrid msgs" datasource="availableApps" />
					<p:graphicImage
						value="/resources/images/apps/#{configDriveboxController.installedAppIcon(0,2)}"
						rendered="#{configDriveboxController.iconHasToBeDisplayed(0,2)}"
						styleClass="appImage" title="#{configDriveboxController.installedAppName(0,2)}"
						style="opacity: 0.2; filter:alpha(opacity=20);" />
				</p:outputPanel>
				<p:outputPanel
					style="background: #333333; width: 80px; height: 80px; display: block; border: 1px solid #222222;">
					<p:droppable dropListener="#{configDriveboxController.onDrop}"
						tolerance="fit" activeStyleClass="slotActive" scope="test"
						onDrop="handleDrop2" id="appDrop_0_3"
						onDropUpdate="installedAppsGrid msgs" datasource="availableApps" />
					<p:graphicImage
						value="/resources/images/apps/#{configDriveboxController.installedAppIcon(0,3)}"
						rendered="#{configDriveboxController.iconHasToBeDisplayed(0,3)}"
						styleClass="appImage" title="#{configDriveboxController.installedAppName(0,3)}"
						style="opacity: 0.2; filter:alpha(opacity=20);" />
				</p:outputPanel>
				<p:outputPanel
					style="background: #333333; width: 80px; height: 80px; display: block; border: 1px solid #222222;">
					<p:droppable dropListener="#{configDriveboxController.onDrop}"
						tolerance="fit" activeStyleClass="slotActive" scope="test"
						onDrop="handleDrop2" id="appDrop_0_4"
						onDropUpdate="installedAppsGrid msgs" datasource="availableApps" />
					<p:graphicImage
						value="/resources/images/apps/#{configDriveboxController.installedAppIcon(0,4)}"
						rendered="#{configDriveboxController.iconHasToBeDisplayed(0,4)}"
						styleClass="appImage" title="#{configDriveboxController.installedAppName(0,4)}"
						style="opacity: 0.2; filter:alpha(opacity=20);" />
				</p:outputPanel>
				<p:outputPanel
					style="background: #333333; width: 80px; height: 80px; display: block; border: 1px solid #222222;">
					<p:droppable dropListener="#{configDriveboxController.onDrop}"
						tolerance="fit" activeStyleClass="slotActive" scope="test"
						onDrop="handleDrop2" id="appDrop_1_0"
						onDropUpdate="installedAppsGrid msgs" datasource="availableApps" />
					<p:graphicImage
						value="/resources/images/apps/#{configDriveboxController.installedAppIcon(1,0)}"
						rendered="#{configDriveboxController.iconHasToBeDisplayed(1,0)}"
						styleClass="appImage" title="#{configDriveboxController.installedAppName(1,0)}"
						style="opacity: 0.2; filter:alpha(opacity=20);" />
				</p:outputPanel>
				<p:outputPanel
					style="background: #333333; width: 80px; height: 80px; display: block; border: 1px solid #222222;">
					<p:droppable dropListener="#{configDriveboxController.onDrop}"
						tolerance="fit" activeStyleClass="slotActive" scope="test"
						onDrop="handleDrop2" id="appDrop_1_1"
						onDropUpdate="installedAppsGrid msgs" datasource="availableApps" />
					<p:graphicImage
						value="/resources/images/apps/#{configDriveboxController.installedAppIcon(1,1)}"
						rendered="#{configDriveboxController.iconHasToBeDisplayed(1,1)}"
						styleClass="appImage" title="#{configDriveboxController.installedAppName(1,1)}"
						style="opacity: 0.2; filter:alpha(opacity=20);" />
				</p:outputPanel>
				<p:outputPanel
					style="background: #333333; width: 80px; height: 80px; display: block; border: 1px solid #222222;">
					<p:droppable dropListener="#{configDriveboxController.onDrop}"
						tolerance="fit" activeStyleClass="slotActive" scope="test"
						onDrop="handleDrop2" id="appDrop_1_2"
						onDropUpdate="installedAppsGrid msgs" datasource="availableApps" />
					<p:graphicImage
						value="/resources/images/apps/#{configDriveboxController.installedAppIcon(1,2)}"
						rendered="#{configDriveboxController.iconHasToBeDisplayed(1,2)}"
						styleClass="appImage" title="#{configDriveboxController.installedAppName(1,2)}"
						style="opacity: 0.2; filter:alpha(opacity=20);" />
				</p:outputPanel>
				<p:outputPanel
					style="background: #333333; width: 80px; height: 80px; display: block; border: 1px solid #222222;">
					<p:droppable dropListener="#{configDriveboxController.onDrop}"
						tolerance="fit" activeStyleClass="slotActive" scope="test"
						onDrop="handleDrop2" id="appDrop_1_3"
						onDropUpdate="installedAppsGrid msgs" datasource="availableApps" />
					<p:graphicImage
						value="/resources/images/apps/#{configDriveboxController.installedAppIcon(1,3)}"
						rendered="#{configDriveboxController.iconHasToBeDisplayed(1,3)}"
						styleClass="appImage" title="#{configDriveboxController.installedAppName(1,3)}"
						style="opacity: 0.2; filter:alpha(opacity=20);" />
				</p:outputPanel>
				<p:outputPanel
					style="background: #333333; width: 80px; height: 80px; display: block; border: 1px solid #222222;">
					<p:droppable dropListener="#{configDriveboxController.onDrop}"
						tolerance="fit" activeStyleClass="slotActive" scope="test"
						onDrop="handleDrop2" id="appDrop_1_4"
						onDropUpdate="installedAppsGrid msgs" datasource="availableApps" />
					<p:graphicImage
						value="/resources/images/apps/#{configDriveboxController.installedAppIcon(1,4)}"
						rendered="#{configDriveboxController.iconHasToBeDisplayed(1,4)}"
						styleClass="appImage" title="#{configDriveboxController.installedAppName(1,4)}"
						style="opacity: 0.2; filter:alpha(opacity=20);" />
				</p:outputPanel>

			</h:panelGrid>
			<br />
			<p:panel header="Applications disponibles">
				<p:dataGrid id="availableApps"
					value="#{configDriveboxController.lApp}" var="app" columns="4">
					<p:column>
						<p:panel header="#{app.id}">

							<p:graphicImage id="application"
								value="/resources/images/apps/#{app.icone}"
								styleClass="appImage" />
							<p:draggable for="application" revert="true" stack=".appImage"
								scope="test" />
							<h:commandLink onclick="dlg2.show();"
								actionListener="#{configDriveboxController.initializeInstalledApps}">configure</h:commandLink>

							<p:droppable
								dropListener="#{configDriveboxController.onDropBack}"
								tolerance="fit" activeStyleClass="slotActive"
								datasource="availableApps" scope="test"
								onDropUpdate="installedAppsGrid msgs" />
						</p:panel>
					</p:column>
				</p:dataGrid>

			</p:panel>
		</h:form>
		<p:dialog header="Modal Dialog" widgetVar="dlg2" modal="true"
			height="200">
			<h:outputText value="This is a Modal Dialog." />
		</p:dialog>
	</ui:define>
</ui:composition>
